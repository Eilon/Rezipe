@inject RecipeStore Recipes
@inject ShellNavigationManager NavigationManager

<Shell OnNavigated="OnNavigated"
       OnNavigating="OnNavigating"
       FlyoutBackgroundImage="@(new FileImageSource { File = "photo.jpg" })"
       FlyoutBackgroundImageAspect="Aspect.AspectFill"
       FlyoutHeaderBehavior="FlyoutHeaderBehavior.CollapseOnScroll">

    <ChildContent>
        <StyleSheet Resource="app-styles.css" Assembly="GetType().Assembly" />

        <FlyoutItem Route="recipes"
                    Title="Recipes"
                    FlyoutDisplayOptions="FlyoutDisplayOptions.AsMultipleItems">

            <ShellContent Route="all"
                          Title="All Recipes">
                <AllRecipes />
            </ShellContent>

            <ShellContent @ref="favRecipesPage"
                          Route="favorites"
                          Title="Favorite Recipes">
                <FavoriteRecipes />
            </ShellContent>

        </FlyoutItem>

        <ShellContent Route="about"
                      Title="About">
            <AboutPage />
        </ShellContent>

    </ChildContent>
</Shell>

@code
{
    Microsoft.MobileBlazorBindings.Elements.ShellContent favRecipesPage;

    void OnNavigated(ShellNavigatedEventArgs e)
    {
    }

    void OnNavigating(ShellNavigatingEventArgs e)
    {
    }

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            Xamarin.Forms.Shell.Current.CurrentItem = favRecipesPage.NativeControl;
        }
    }
}
